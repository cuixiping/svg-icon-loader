(function($){var svg_icons={};$.svgIcons=function(file,opts){var svgns="http://www.w3.org/2000/svg",xlinkns="http://www.w3.org/1999/xlink",xmlns="http://www.w3.org/2000/xmlns/",icon_w=opts.w||24,icon_h=opts.h||24,elems,svgdoc,testImg,icons_made=false,data_loaded=false,load_attempts=0,data_pre="data:image/svg+xml;charset=utf-8;base64,";if(opts.svgz){var data_el=$('<object data="'+file+'" type=image/svg+xml></object>').appendTo("body").hide();try{svgdoc=data_el[0].contentDocument;data_el.load(getIcons);getIcons(0,true)}catch(err1){useFallback()}}else{$.ajax({url:file,dataType:"xml",success:function(data){svgdoc=data;$(function(){getIcons("ajax")})},error:function(){$(function(){useFallback()})}})}function getIcons(evt,no_wait){if(evt!=="ajax"){if(data_loaded)return;svgdoc=data_el[0].contentDocument;var isReady=svgdoc&&svgdoc.getElementById("svg_eof");if(!isReady&&!(no_wait&&isReady)){load_attempts++;if(load_attempts<50){setTimeout(getIcons,20)}else{useFallback();data_loaded=true}return}data_loaded=true}elems=$(svgdoc.firstChild).children();var testSrc=data_pre+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzUiIGhlaWdodD0iMjc1Ij48L3N2Zz4%3D";testImg=$(new Image).attr({src:testSrc,width:0,height:0}).appendTo("body").load(function(){makeIcons(true)}).error(function(){makeIcons()})}function makeIcons(toImage,fallback){if(icons_made)return;if(opts.no_img)toImage=false;var holder;var setIcon=function(target,icon,id,setID){if(opts.replace){if(setID)icon.attr("id",id);var cl=target.attr("class");if(cl)icon.attr("class","svg_icon "+cl);target.replaceWith(icon)}else{target.append(icon)}};var addIcon=function(icon,id){if(opts.id_match===undefined||opts.id_match!==false){setIcon(holder,icon,id,true)}svg_icons[id]=icon};if(fallback){var path=opts.fallback_path?opts.fallback_path:"";$.each(fallback,function(id,imgsrc){holder=$("#"+id);var icon=$(new Image).attr({"class":"svg_icon",src:path+imgsrc,width:icon_w,height:icon_h,alt:"icon"});addIcon(icon,id)})}else{$.each(elems,function(i,elem){var id=elem.getAttribute("id");if(id=="svg_eof")return;holder=$("#"+id);var svg=elem.getElementsByTagNameNS(svgns,"svg")[0];var svgcontent='<svg width="'+icon_w+'" height="'+icon_h+'" viewBox="0 0 '+icon_w+" "+icon_h+'" xmlns="'+svgns+'" xmlns:xlink="'+xlinkns+'" class="svg_icon">'+(new XMLSerializer).serializeToString(svg)+"</svg>";if(toImage){var str=data_pre+encode64(svgcontent);var icon=$(new Image).attr({"class":"svg_icon",src:str,width:icon_w,height:icon_h})}else{var svgroot=(new DOMParser).parseFromString(svgcontent,"text/xml").documentElement;console.log(svgroot.tagName);var icon=fixIDs($(svgroot),i)}addIcon(icon,id)})}if(opts.placement){$.each(opts.placement,function(sel,id){if(!svg_icons[id])return;$(sel).each(function(i){var copy=svg_icons[id].clone();if(i>0&&!toImage)copy=fixIDs(copy,i,true);setIcon($(this),copy,id)})})}if(!fallback){if(data_el)data_el.remove();testImg.remove()}if(opts.resize)$.resizeSvgIcons(opts.resize);icons_made=true;if(opts.callback)opts.callback(svg_icons)}function fixIDs(svg_el,svg_num,force){var defs=svg_el.find("defs");if(!defs.length)return svg_el;defs.find("[id]").each(function(i){var id=this.id;var no_dupes=$(svgdoc).find("#"+id).length<=1;if(!force&&no_dupes)return;var new_id=id+svg_num+i;$(this).attr("id",new_id);svg_el.find('[fill="url(#'+id+')"]').each(function(){$(this).attr("fill","url(#"+new_id+")")}).end().find('[stroke="url(#'+id+')"]').each(function(){$(this).attr("stroke","url(#"+new_id+")")}).end().find("use").each(function(){if(this.getAttribute("xlink:href")=="#"+id){this.setAttributeNS(xlinkns,"href","#"+new_id)}})});return svg_el}function useFallback(){if(file.indexOf(".svgz")!=-1){var reg_file=file.replace(".svgz",".svg");if(window.console){console.log(".svgz failed, trying with .svg")}$.svgIcons(reg_file,opts)}else if(opts.fallback){makeIcons(false,opts.fallback)}}function encode64(input){if(window.btoa)return window.btoa(input);var _keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var output=new Array(Math.floor((input.length+2)/3)*4);var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0,p=0;do{chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output[p++]=_keyStr.charAt(enc1);output[p++]=_keyStr.charAt(enc2);output[p++]=_keyStr.charAt(enc3);output[p++]=_keyStr.charAt(enc4)}while(i<input.length);return output.join("")}};$.getSvgIcon=function(id){return svg_icons[id]};$.resizeSvgIcons=function(obj){var change_sel=!$(".svg_icon:first").length;$.each(obj,function(sel,size){var arr=$.isArray(size);var w=arr?size[0]:size,h=arr?size[1]:size;if(change_sel){sel=sel.replace(/\.svg_icon/g,"svg")}$(sel).each(function(){this.setAttribute("width",w);this.setAttribute("height",h)})})}})(jQuery);